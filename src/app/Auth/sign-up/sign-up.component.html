<form [formGroup]="form" (ngSubmit)="Submit()">
  <h2 class="text-center">Welcome Eng Hadeer â™¥</h2>
  <p class="text-center">
    We just need a little bit of data from you to get you started with Forum
  </p>

  <div class="control">
    <label for="email">Email</label>
    <input
      class="form-control"
      [class.is-invalid]="
        form.get('email')?.touched && form.get('email')?.invalid
      "
      formControlName="email"
      id="email"
      type="email"
      name="email"
    />
    @if (form.get('email')?.hasError("required")) {
    <div class="invalid-feedback text-start">The Email Field Is Required!</div>
    }@else if (form.get('email')?.hasError("email")) {
    <div class="invalid-feedback text-start">Please Enter the Valid Email</div>
    }
  </div>

  <div formGroupName="passwords" class="control-row">
    <div class="control">
      <label for="password">Password</label>
      <input
        class="form-control"
        [class.is-invalid]="
          form.controls.passwords.get('password')?.touched &&
          form.controls.passwords.get('password')?.invalid
        "
        formControlName="password"
        id="password"
        type="password"
        name="password"
      />
      @if (form.controls.passwords.get('password')?.hasError("required")) {
      <div class="invalid-feedback text-start">
        The Password Field Is Required!
      </div>
      }@else if (form.controls.passwords.get('password')?.hasError("minlength"))
      {
      <div class="invalid-feedback text-start">
        password must be higher than
        {{form.controls.passwords.get('password')?.errors?.["minlength"].requiredLength}}
        characters
      </div>
      }@else if (form.controls.passwords.get('password')?.hasError("maxlength"))
      {
      <div class="invalid-feedback text-start">
        password must be Lower than
        {{form.controls.passwords.get('password')?.errors?.["maxlength"].requiredLength}}
        characters
      </div>
      }
    </div>

    <div class="control">
      <label>Confirm Password</label>
      <input
        class="form-control"
        [class.is-invalid]="
          form.controls.passwords.get('confirmPassword')?.touched &&
          form.controls.passwords.get('confirmPassword')?.invalid
        "
        formControlName="confirmPassword"
        type="password"
      />
      @if (form.get("passwords")?.hasError('isMatching')) {
      <div class="invalid-feedback text-start d-block">Passwords do not match!</div>
      }
      @else if
      (form.controls.passwords.get('confirmPassword')?.hasError("required")) {
      <div class="invalid-feedback text-start">
        The ConfirmPassword Field Is Required!
      </div>
      }
    </div>
  </div>

  <hr />

  <div>
    <div class="control-row">
      <div class="control">
        <label for="first-name">First Name</label>
        <input
          class="form-control"
          [class.is-invalid]="
            form.get('firstName')?.touched && form.get('firstName')?.invalid
          "
          formControlName="firstName"
          type="text"
          id="first-name"
          name="first-name"
        />
        @if (form.get('firstName')?.hasError("required")) {
        <div class="invalid-feedback text-start">
          The FirstName Field Is Required!
        </div>
        }@else if (form.get('firstName')?.hasError("minlength")) {
        <div class="invalid-feedback text-start">
          FirstName must be higher than
          {{form.get('firstName')?.errors?.["minlength"].requiredLength}}
          characters
        </div>
        }@else if (form.get('firstName')?.hasError("maxlength")) {
        <div class="invalid-feedback text-start">
          FirstName must be Lower than
          {{form.get('firstName')?.errors?.["maxlength"].requiredLength}}
          characters
        </div>
        }
      </div>

      <div class="control">
        <label for="last-name">Last Name</label>
        <input
          class="form-control"
          [class.is-invalid]="
            form.get('lastName')?.touched && form.get('lastName')?.invalid
          "
          formControlName="lastName"
          type="text"
          id="last-name"
          name="last-name"
        />
        @if (form.get('lastName')?.hasError("required")) {
        <div class="invalid-feedback text-start">
          The LastName Field Is Required!
        </div>
        }@else if (form.get('lastName')?.hasError("minlength")) {
        <div class="invalid-feedback text-start">
          LastName must be higher than
          {{form.get('lastName')?.errors?.["minlength"].requiredLength}}
          characters
        </div>
        }@else if (form.get('lastName')?.hasError("maxlength")) {
        <div class="invalid-feedback text-start">
          LastName must be Lower than
          {{form.get('lastName')?.errors?.["maxlength"].requiredLength}}
          characters
        </div>
        }
      </div>
    </div>

    <hr />

    <fieldset formGroupName="address">
      <legend>Your Address</legend>

      <div class="control-row">
        <div class="control">
          <label for="street">Street</label>
          <input
            class="form-control"
            [class.is-invalid]="
              form.controls.address.get('street')?.touched &&
              form.controls.address.get('street')?.invalid
            "
            formControlName="street"
            type="text"
            id="street"
            name="street"
          />
          @if (form.controls.address.get('street')?.hasError("required")) {
          <div class="invalid-feedback text-start">
            The street Field Is Required!
          </div>
          }
        </div>

        <div class="control">
          <label for="number">Number</label>
          <input
            class="form-control"
            [class.is-invalid]="
              form.controls.address.get('number')?.touched &&
              form.controls.address.get('number')?.invalid
            "
            formControlName="number"
            type="text"
            id="number"
            name="number"
          />
          @if (form.controls.address.get('number')?.hasError("required")) {
          <div class="invalid-feedback text-start">
            The Number Field Is Required!
          </div>
          }
        </div>
      </div>

      <div class="control-row">
        <div class="control">
          <label for="postal-code">Postal Code</label>
          <input
            class="form-control"
            [class.is-invalid]="
              form.controls.address.get('postalCode')?.touched &&
              form.controls.address.get('postalCode')?.invalid
            "
            formControlName="postalCode"
            type="text"
            id="postal-code"
            name="postal-code"
          />
          @if (form.controls.address.get('postalCode')?.hasError("required")) {
          <div class="invalid-feedback text-start">
            The PostalCode Field Is Required!
          </div>
          }
        </div>

        <div class="control">
          <label for="city">City</label>
          <input
            class="form-control"
            [class.is-invalid]="
              form.controls.address.get('city')?.touched &&
              form.controls.address.get('city')?.invalid
            "
            formControlName="city"
            type="text"
            id="city"
            name="city"
          />
          @if (form.controls.address.get('city')?.hasError("required")) {
          <div class="invalid-feedback text-start">
            The City Field Is Required!
          </div>
          }
        </div>
      </div>
    </fieldset>
  </div>

  <hr />

  <div class="control-row">
    <div class="control">
      <label for="role">What best describes your role?</label>
      <select formControlName="role" id="role">
        <option value="student">Student</option>
        <option value="teacher">Teacher</option>
        <option value="employee">Employee</option>
        <option value="founder">Founder</option>
        <option value="other">Other</option>
      </select>
    </div>
  </div>

  <hr />

  <fieldset formArrayName="findUs">
    <legend>How did you find us? (Optionally)</legend>
    <div class="control">
      <input
        formControlName="0"
        type="checkbox"
        id="google"
        name="acquisition"
        value="google"
      />
      <label for="google">Google</label>
    </div>

    <div class="control">
      <input
        formControlName="1"
        type="checkbox"
        id="friend"
        name="acquisition"
        value="friend"
      />
      <label for="friend">Referred by friend</label>
    </div>

    <div class="control">
      <input
        formControlName="2"
        type="checkbox"
        id="other"
        name="acquisition"
        value="other"
      />
      <label for="other">Other</label>
    </div>
  </fieldset>

  <hr />

  <div class="control-row">
    <div class="control">
      <label for="terms-and-conditions">
        <input
          formControlName="agree"
          type="checkbox"
          id="terms-and-conditions"
          name="terms"
        />
        I agree to the terms and conditions
      </label>
    </div>
  </div>
  @if (form.get('agree')?.touched && form.get('agree')?.invalid) {
  <div class="invalid-feedback text-start d-block">
    You have to agree to our terms and conditions
  </div>
  }

  <p class="form-actions">
  <button routerLink="../" class="button ">Back</button>
    <button type="reset" class="button button-flat">Reset</button>
    <button type="submit" class="button">Sign up</button>
  </p>

</form>
